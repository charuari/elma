<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elma: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elma
   </div>
   <div id="projectbrief">An event loop manager for embedded systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Elma_TCP</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;===</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;Elma is an event loop and process manager for embedded and reactive systems. It keeps track of processes, finite state machines, events, and communication channels, executing them at specified frequencies. Currently, processes talk to each other via events, this repository contains methods which describes how Json messages will be send back and forth between processes using TCP/IP protocol.</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;Installation</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;===</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;The source code for Elma_TCP [is on Github](https://github.com/charuari/elma_TCP).</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;From Dockerhub</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;===</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;To get started, you will need a C++ build environment to compile.</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;- git clone https://github.com/charuari/elma_TCP.git</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;- docker run -v $PWD:/source -it klavins/elma:latest bash</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;- make</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;Execution</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;===</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;Example 1</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;---</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;- examples/bin/test_pingserver &amp;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;- examples/bin/test_pingclient</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;- ps waux</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;Example 2</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;---</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;- example/bin/test_server &amp;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;- example/bin/test_client</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;- ps waux</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;Design Process</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;===</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;To make Elma processes communication via TCP/IP, the first step I decided to do is to write a C++ library for TCP/IP server and client, so that instances of them can be used inside elma process derived class. The library I used is C socket library and many resources had things written in C. Hence, writing one in C++ felt mandatory in my case. The send and receive features of server and client involves byte packets and initially, I had designed them  for only strings and tested it with basic server client chat . Upon success, I had to tweek a little to make it suitable for json messages. Now, TCP/IP server client could send back and forth json messages.</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;The goal of this project is to use this in Elma and I had decided to build two examples for it.</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    1. Simple client server ping</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    2. Temperature server</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;Description</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;===</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;Simple client server ping</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;---</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;This was experimented to see how to integrate the so far stand-a-lone TCP/IP into Elma.</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;Server and client were derived from abstract base class of Elma process and the update of client process will emit the json message(here, it&#39;s just an hello) which is send to be send to server. This event will be watched in the init method with appropriate handler.</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;Similarly, the update of server process will receive the message from client and send back the current time and date as an acknowldegement of the established communication.</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;Just printing the messages from server and client terminal help us to confirm the communication.</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;Temperature server</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;---</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;Server and client are derived from Elma process base class.</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;A helper class is used to generate random temperature and geographic co-ordinates which serves as data to be sent by client to server. This data will be sent from client process update method to server and it is received in the server process update method and the server sends back the count of the data received so far.</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;The random data generator is set with srand(0), for the values to be determinant so that it can be tested in the server side if same data is received. Also, the number of updates of server process is tested for the number of acknowledgements sent back to client.</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;Print statements from server and client terminals are used to confirm communication.</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;Files</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;===</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;C++ library for TCP/IP:</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;---</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;- tcp_server.h</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;- tcp_client.h</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;- tcp_server.cc</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;- tcp_client.cc</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;Simple Client Server ping</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;---</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;- server_ping.h</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;- client_ping.h</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;- test_pingserver.cc</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;- test_pingclient.cc</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;Temperature Server</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;---</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;- data_generator.h</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;- server_process.h</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;- client_process.h</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;- test_server.cc</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;- test_client.cc</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;File structure:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;===</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;- src</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    - channel.cc</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    - client.cc</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    - manager.cc</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    - process.cc</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    - state_machine.cc</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    - state.cc</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    - tcp_client.cc</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    - tcp_server.cc</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;- include</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    - channel.h</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    - client.h</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    - client_ping.h</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    - client_process.h</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    - data_generator.h</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    - elma.h</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    - event.h</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    - exceptions.h</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    - literals.h</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    - manager.h</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    - process.h</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    - server_ping.h</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    - server_process.h</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    - state.h</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    - state_machine.h</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    - tcp_client.h</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    - tcp_server.h</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    - transition.h</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;- examples</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    - Makefile</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    - test_client.cc</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    - test_pingclient.cc</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    - test_pingserver.cc</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    - test_server.cc    </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;Results</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;===</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;- Simple Client Server ping</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    - Please find the print statements of messages from client and server side.</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    - Client pings server with &quot;Hello&quot;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    - Server responds with current date and time.</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;- Temperature Server</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    - Please find the print statements of messages from client and server side.</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    - The length of the data sent from client is tested against the message received by server.</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    - Also, the number of updates of server process is tested against the number of acknowledgements sent by server to client.</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;Acknowledgements</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;===</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;A great thanks to the following people!</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;- Prof.Klavins - He was of a great help for giving me ideas about how to integrate TCP/IP into Elma. He also advised me how to write a gtest for this case.</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;- Justin Vrana - Gave me the idea about showing print statements from server and client side to show confirmation, in case test case couldn&#39;t be written.</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;- Kung-Hung(Henry)Lu - Helped me with the file structure and make file for server client applications.</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;References</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;===</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;Libraries</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;---</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;- Elma</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;- C socket libraries </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    - sys/types.h</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    - sys/socket.h</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    - netdb.h</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    - netinet/in.h</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;Links</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;---</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;- https://www.geeksforgeeks.org/socket-programming-cc/</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;Books</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;---</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;- Exploring Raspberry PI by Derek Molly</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
  <hr class="footer"/><address class="footer"><small>
  Developed by <a href="http://klavinslab.org">Eric Klavins</a> for UW ECE P 520<br>
  Generated on Fri Mar 22 2019 22:57:12 for Elma by &#160;<a href="http://www.doxygen.org/index.html">
  Doxygen
  </a> 1.8.8
  </small></address>
  </body>
  </html>